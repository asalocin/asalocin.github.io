{{- $p := . -}}
{{- $raw := $p.Params.status | default "unknown" -}}
{{- $status :=
    cond (eq $raw "now") "in-progress"
      (cond (eq $raw "finished") "completed"
        (cond (eq $raw "queue") "wishlist" $raw)) -}}

<article class="read-card"
  data-title="{{ $p.Title | urlize }}"
  data-author="{{ $p.Params.author | default "" | urlize }}"
  data-status="{{ $status }}">

  <div class="cover-wrapper">
    {{ with $p.Params.cover }}
      <img class="read-cover" src="{{ . }}" alt="Cover: {{ $p.Title }}">
    {{ else }}
      <div class="read-cover" aria-hidden="true"></div>
    {{ end }}
  </div>

  <div class="read-content">
    <h3 class="read-title"><a href="{{ $p.RelPermalink }}">{{ $p.Title }}</a></h3>
    {{ with $p.Params.author }}
      <div class="read-author">{{ . }}</div>
    {{ end }}

    <div class="read-meta">
      <span>Estado: {{ $raw }}</span>
      {{ with $p.Params.started }}<span>Inicio: {{ . }}</span>{{ end }}
      {{ with $p.Params.published }}<span>Publicado: {{ . }}</span>{{ end }}
      {{ with $p.Params.publisher }}<span>{{ . }}</span>{{ end }}
      {{ with $p.Params.pages }}<span>{{ . }} pp.</span>{{ end }}
      {{ with $p.Params.language }}<span>{{ . }}</span>{{ end }}
    </div>

    {{ with $p.Params.progress }}
      <div class="read-progress" style="--p: {{ . }}%;">
        <span></span>
      </div>
    {{ end }}
  </div>
</article>

