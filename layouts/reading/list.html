{{ define "main" }}
<main class="reading-landing">
  <!-- HERO / WELCOME -->
  <section class="hero">
    <h1> üïÆ Reading</h1>
    <p class="tagline">Un cuaderno de lecturas: lo que leo, lo que termin√©, y lo que quiero leer.</p>

    <!-- QUICK ACTIONS / STATS -->
    {{ $all := .Pages }}
    {{ $inprog := where $all ".Params.status" "in-progress" }}
    {{ $done := where $all ".Params.status" "completed" }}
    {{ $wish := where $all ".Params.status" "wishlist" }}

    <div class="quick-cards">
      <a class="qcard" href="#in-progress" data-filter="in-progress">
        <div class="qicon"> ‚è±Ô∏é </div>
        <div class="qtitle">En curso</div>
        <div class="qmeta">{{ len $inprog }} libro{{ if gt (len $inprog) 1 }}s{{ end }}</div>
      </a>
      <a class="qcard" href="#completed" data-filter="completed">
        <div class="qicon">‚úì</div>
        <div class="qtitle">Terminados</div>
        <div class="qmeta">{{ len $done }} libro{{ if gt (len $done) 1 }}s{{ end }}</div>
      </a>
      <a class="qcard" href="#wishlist" data-filter="wishlist">
        <div class="qicon">‚è±Ô∏é</div>
        <div class="qtitle">Wishlist</div>
        <div class="qmeta">{{ len $wish }} pendiente{{ if ne (len $wish) 1 }}s{{ end }}</div>
      </a>
    </div>

    <!-- SEARCH / FILTER BAR -->
    <div class="controls">
      <input id="searchInput" type="search" placeholder="Buscar por t√≠tulo o autor‚Ä¶" aria-label="Buscar">
      <div class="segmented">
        <button class="seg active" data-seg="all">Todo</button>
        <button class="seg" data-seg="in-progress">En curso</button>
        <button class="seg" data-seg="completed">Terminados</button>
        <button class="seg" data-seg="wishlist">Wishlist</button>
      </div>
    </div>
  </section>

  <!-- LISTAS AGRUPADAS -->
  <section id="in-progress" class="bucket">
    <h2>‚è±Ô∏é En curso</h2>
    <div class="grid">
      {{ range $inprog.ByDate.Reverse }}
        {{ partial "reading/card.html" . }}
      {{ else }}
        <p class="empty">No hay lecturas en curso (por ahora ìÖ∑).</p>
      {{ end }}
    </div>
  </section>

  <section id="completed" class="bucket">
    <h2>‚úì Terminados</h2>
    <div class="grid">
      {{ range $done.ByDate.Reverse }}
        {{ partial "reading/card.html" . }}
      {{ else }}
        <p class="empty">A√∫n no marcas libros como terminados.</p>
      {{ end }}
    </div>
  </section>

  <section id="wishlist" class="bucket">
    <h2>‚è±Ô∏é Wishlist</h2>
    <div class="grid">
      {{ range $wish.ByDate.Reverse }}
        {{ partial "reading/card.html" . }}
      {{ else }}
        <p class="empty">Agrega t√≠tulos que quieras leer.</p>
      {{ end }}
    </div>
  </section>
</main>

<!-- Inline styles (ligeros, minimalistas, respetan tipograf√≠a del tema) -->
<style>
.reading-landing { max-width: 980px; margin: 0 auto; padding: 2rem 1rem 4rem; }
.hero h1 { font-size: 2.2rem; margin: 0 0 .25rem; }
.tagline { opacity: .8; margin-bottom: 1.25rem; }
.quick-cards { display: grid; grid-template-columns: repeat(3,1fr); gap: .75rem; margin: 1rem 0 1.5rem; }
.qcard { display: grid; grid-template-columns: 48px 1fr; grid-template-rows: auto auto; gap: .25rem .75rem; align-items: center; padding: .9rem; border: 1px solid var(--border, rgba(127,127,127,.25)); border-radius: .75rem; text-decoration: none; transition: transform .08s ease, background .15s ease; }
.qcard:hover { transform: translateY(-1px); background: rgba(127,127,127,.06); }
.qicon { grid-row: 1 / span 2; font-size: 1.6rem; line-height: 1; }
.qtitle { font-weight: 600; }
.qmeta { opacity: .7; font-size: .95rem; }
.controls { display: flex; flex-wrap: wrap; gap: .5rem; align-items: center; justify-content: space-between; margin: .25rem 0 1.25rem; }
#searchInput { flex: 1 1 280px; border: 1px solid var(--border, rgba(127,127,127,.25)); border-radius: .6rem; padding: .6rem .75rem; background: transparent; }
.segmented { display: inline-flex; border: 1px solid var(--border, rgba(127,127,127,.25)); border-radius: .6rem; overflow: hidden; }
.seg { border: 0; background: transparent; padding: .5rem .7rem; cursor: pointer; }
.seg.active { background: rgba(127,127,127,.12); }

.bucket { margin-top: 2rem; }
.bucket h2 { font-size: 1.2rem; margin-bottom: .75rem; }
.grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: .9rem; }

.read-card {
  border: 1px solid var(--border, rgba(127,127,127,.25));
  border-radius: .9rem;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
}

.cover-wrapper {
  margin-bottom: .8rem;
}

.read-cover {
  width: 120px;
  height: auto;
  border-radius: .5rem;
  object-fit: cover;
  background: rgba(127,127,127,.1);
}

.read-content {
  width: 100%;
}

.read-title { margin: 0; font-size: 1rem; line-height: 1.2; }
.read-author { opacity: .75; font-size: .95rem; margin-top: .2rem; }
.read-meta { display: flex; gap: .5rem; flex-wrap: wrap; opacity: .7; font-size: .85rem; margin-top: .35rem; }
.read-progress { height: 6px; border-radius: 999px; background: rgba(127,127,127,.2); overflow: hidden; margin-top: .5rem; }
.read-progress > span { display: block; height: 100%; width: var(--p,0%); background: currentColor; opacity: .5; }

.empty { opacity: .6; font-style: italic; }

@media (max-width: 720px) {
  .quick-cards { grid-template-columns: 1fr; }
  .read-card { grid-template-columns: 56px 1fr; }
  .read-cover { width: 56px; height: 84px; }
}
</style>

<!-- JS para b√∫squeda y filtrado -->
<script defer src="/js/reading.js"></script>
{{ end }}
